---
layout:     post
title:      条形图的绘制
subtitle:   
date:       2020-07-06
author:     yinbinqiu
header-img: image/20200703-surface.jpg
catalog: true
tags:
    - gcookbook package
    - barplot
    - ggplot
---

# 条形图

- 简单条形图
- 簇状条形图
- 频数条形图
- 条形图着色
- 正负条形图分别着色
- 调整宽度和条形间距
- 绘制堆积条形图
- 绘制百分比堆积条形图
- 添加数据标签
- 绘制Cleveland点图


---
### 简单条形图
```
# 首先导入包
library(ggplot2)
# 安装gcookbook包，用于调用数据
install.packages("gcookbook")
library(gcookbook)
```

```
# identity将y对应的值作为条形的高度，count则是每组的个数，此时不需要y参数
ggplot(pg_mean, aes(x=group, y=weight)) + geom_bar(stat="identity")
```
![]()


```
# 更改颜色，fill填充条形内颜色，colour调整外框颜色
ggplot(pg_mean, aes(x=group, y=weight)) + 
    geom_bar(stat="identity", fill="lightblue",colour="black")
ggplot(pg_mean, aes(x=group, y=weight)) + 
    geom_bar(stat="identity", fill="red",colour="blue")

```
![]()
![]()


---
### 簇状条形图

```
# 查看gcookbook中的dataframe数据cabbage_exp
cabbage_exp

# Date的因子（类别）作为x轴，Weight作为y轴，同时将Cultivar映射给fill
# 可以理解为组别，并将position设置为dodge，即水平方向并排，而默认是
# 垂直方向堆叠
ggplot(cabbage_exp, aes(x=Date, y=Weight, fill=Cultivar)) + 
    geom_bar(position="dodge", stat="identity")
```
![]()
![]()

```
# 每个bar添加黑色边框线，并使用新的调色板
library(RColorBrewer)
ggplot(cabbage_exp, aes(x=Date, y=Weight, fill=Cultivar)) + 
    geom_bar(position="dodge", stat="identity", colour="black") + 
    scale_fill_brewer(palette="Pastell")

```
![]()



```
# 删除最后一行数据，再进行绘图，发现临近的会自动扩充到缺失位置
mv_fina = cabbage_exp[1:5,]
ggplot(mv_fina, aes(x=Date, y=Weight, fill=Cultivar)) + 
    geom_bar(position="dodge", stat="identity", colour="black") + 
    scale_fill_brewer(palette="Pastell")
```
![]()

---

### 频数条形图








